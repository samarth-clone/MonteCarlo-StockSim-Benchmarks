# Monte Carlo Stock Simulator Benchmark

This project implements Monte Carlo stock price simulation using different computing paradigms (sequential, OpenMP, and CUDA) and benchmarks their performance.

## Overview

The project consists of three main components:

- **Stock Data Fetcher** - A Python script to fetch historical stock price data
- **Stock Simulators** - C++/CUDA implementations using different parallelization methods:
    - Sequential (single-threaded CPU)
    - OpenMP (multi-threaded CPU)
    - CUDA (GPU)
- **Timer Utility** - Helper class to measure and report performance metrics

## Requirements

- C++ compiler with OpenMP support
- NVIDIA CUDA Toolkit (for GPU implementation)
- Python 3.6+ with pip
- Alpha Vantage API key (for fetching stock data)

## Setup

### Install Python dependencies

```bash
pip install -r requirements.txt
```

### Set up your Alpha Vantage API key

You can either set it as an environment variable:

```bash
export ALPHA_VANTAGE_API_KEY="your_api_key_here"
```

Or provide it as a command-line argument when running the fetcher script.

### Compile the simulators

```bash
./compile.sh
```

This will build all three implementations: sequential, OpenMP, and CUDA.

## Usage

### 1. Fetch historical stock data

```bash
python stock_data_fetcher.py TICKER [--api-key API_KEY] [--output-dir DIR] [--force]
```

Arguments:

- `TICKER`: Stock ticker symbol (e.g., AAPL, MSFT, GOOGL)
- `--api-key`: Alpha Vantage API key (optional if set as environment variable)
- `--output-dir`: Directory to save data (default: "historic_data")
- `--force`: Force update even if data file already exists

Example:

```bash
python stock_data_fetcher.py AAPL --api-key your_api_key_here
```

### 2. Run the stock simulators

Run one of the three simulator implementations:

```bash
# Sequential CPU version
./sequential_sim TICKER

# OpenMP multi-threaded version
./omp_sim TICKER

# CUDA GPU version
./cuda_sim TICKER
```

Where `TICKER` is the stock symbol you previously downloaded (e.g., AAPL).

## Output

Each simulator will:

- Read the historical data from the CSV file in the `historic_data` directory
- Compute model parameters (starting price, drift, volatility)
- Run Monte Carlo simulations (100,000 paths over 100 days by default)
- Save simulation results in the `predictions` directory:
    - Full trajectory data (all paths)
    - Mean prediction path
- Generate timing information in CSV files (`timing_implementation_ticker.csv`)

## Performance Comparison

To compare the performance of different implementations:

1. Run all three simulators with the same ticker
2. Compare the timing CSV files generated by each run
3. The key metric is the "monte_carlo_simulation" operation time in milliseconds

## Customization

The simulation parameters (number of paths, steps, etc.) can be modified in the source code of each simulator.

## Files

- `stock_data_fetcher.py` - Python script to fetch historical stock data
- `sequential_stock_simulator.cpp` - Sequential CPU implementation
- `omp_stock_simulator.c` - OpenMP parallel implementation
- `cuda_stock_simulator.cu` - CUDA GPU implementation
- `timer_util.h` - Performance timing utility
- `compile.sh` - Compilation script